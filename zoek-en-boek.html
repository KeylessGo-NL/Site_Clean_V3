<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8" />
    <title>Zoek &amp; boek een voertuig ‚Äì KeylessGo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Zoek en boek direct een keyless auto of busje van KeylessGo in de regio Utrecht. Filter op voertuigtype, locatie en gebruiksdoel en boek via SnappCar.">

    <!-- Leaflet CSS -->
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Eigen styles -->
    <link rel="stylesheet" href="data/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Pagina-specifieke layout voor hero + filters -->
    <style>
        .sub-hero {
            background-color: #f4f7fa;
            border-bottom: 1px solid #e5e7eb;
            padding-top: calc(var(--header-height) + 24px);
            padding-bottom: 40px;
        }

        .sub-hero-inner {
            display: grid;
            grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.1fr);
            gap: 28px;
            align-items: center;
        }

        .sub-hero-eyebrow {
            font-size: 0.78rem;
            letter-spacing: 0.16em;
            text-transform: uppercase;
            color: #6b7280;
            margin-bottom: 0.4rem;
        }

        .sub-hero-title {
            font-size: 2.1rem;
            line-height: 1.2;
            margin-bottom: 0.75rem;
            color: var(--primary-blue);
        }

        .sub-hero-text {
            font-size: 0.98rem;
            max-width: 620px;
            color: var(--text-light);
            margin-bottom: 1.1rem;
        }

        .sub-hero-quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 0.8rem;
        }

        .chip-button {
            border-radius: 999px;
            border: 1px solid #d1d5db;
            background-color: #ffffff;
            padding: 7px 14px;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: background 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
        }

        .chip-button i {
            color: var(--accent-orange);
        }

        .chip-button:hover {
            background-color: #1a2c49;
            border-color: #1a2c49;
            color: #ffffff;
            transform: translateY(-1px);
        }

        .chip-button:hover i {
            color: #ffffff;
        }

        .sub-hero-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 0.82rem;
            color: #4b5563;
        }

        .sub-hero-meta span {
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .sub-hero-meta i {
            color: #16a34a;
        }

        .sub-hero-right {
            display: flex;
            justify-content: flex-end;
        }

        .sub-hero-card {
            background-color: #ffffff;
            border-radius: 14px;
            padding: 18px 18px 16px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 12px 30px rgba(15, 23, 42, 0.12);
            max-width: 360px;
            width: 100%;
        }

        .sub-hero-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .card-label {
            font-size: 0.83rem;
            font-weight: 700;
            color: var(--primary-blue);
        }

        .card-pill {
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 999px;
            background-color: var(--primary-blue);
            color: #ffffff;
        }

        .sub-hero-steps {
            list-style: none;
            padding-left: 0;
            margin: 0 0 0.9rem;
            font-size: 0.88rem;
            color: var(--text-light);
        }

        .sub-hero-steps li {
            margin-bottom: 0.4rem;
            position: relative;
            padding-left: 0.9rem;
        }

        .sub-hero-steps li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            top: 0.1rem;
            color: var(--accent-orange);
        }

        .sub-hero-card-note {
            font-size: 0.8rem;
            color: #6b7280;
            margin: 0.6rem 0 0;
        }

        /* Zoek-layout */
        .search-layout {
            padding: 40px 0 70px;
            background-color: #ffffff;
        }

        .search-layout-inner {
            display: grid;
            grid-template-columns: 300px minmax(0, 2.3fr) minmax(0, 1.4fr);
            gap: 24px;
            align-items: flex-start;
        }

        .filters-panel {
            background-color: #ffffff;
            border-radius: 14px;
            padding: 16px 14px 18px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 10px 26px rgba(15, 23, 42, 0.08);
        }

        .filters-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.4rem;
        }

        .filters-header h2 {
            font-size: 1rem;
            margin: 0;
        }

        .filters-panel.collapsed .filters-body {
            display: none;
        }

        .filters-toggle-mobile {
            display: none;
            width: 100%;
            margin: 6px 0 8px;
            padding: 8px 10px;
            font-size: 0.85rem;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            background-color: #f9fafb;
            display: none;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .filters-toggle-mobile span {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .filters-toggle-mobile i {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .filter-group {
            margin-bottom: 0.65rem;
        }

        .filter-group label {
            display: block;
            font-size: 0.82rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--primary-blue);
        }

        .filter-row {
            display: flex;
            gap: 8px;
        }

        .filter-row > * {
            flex: 1;
        }

        .filter-description {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        .inline-checkbox {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.82rem;
            margin-bottom: 4px;
        }

        .filters-actions {
            display: flex;
            gap: 8px;
            margin-top: 0.7rem;
        }

        .filters-actions .btn {
            padding: 9px 12px;
            font-size: 0.83rem;
        }

        /* >>> Strakkere inputs binnen filterpanel <<< */
        .filters-panel input[type="text"],
        .filters-panel input[type="number"],
        .filters-panel input[type="date"],
        .filters-panel select {
            width: 100%;
            box-sizing: border-box;
            padding: 8px 10px;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            font-size: 0.86rem;
        }

        /* Specifiek voor datumvelden: iets kleiner font + extra ruimte voor icoon */
        .filters-panel input[type="date"] {
            font-size: 0.8rem;
            padding-right: 32px;
        }

        .map-panel {
            background-color: #ffffff;
            border-radius: 14px;
            padding: 12px 12px 14px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 12px 30px rgba(15, 23, 42, 0.12);
            display: flex;
            flex-direction: column;
            gap: 10px;
            height: 100%;
        }

        .map-panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .map-panel-header h2 {
            font-size: 1.02rem;
            margin: 0;
        }

        .map-mode-toggle {
            display: inline-flex;
            border-radius: 999px;
            border: 1px solid #d1d5db;
            overflow: hidden;
        }

        .map-mode-toggle button {
            border: none;
            background-color: transparent;
            padding: 5px 10px;
            font-size: 0.8rem;
            cursor: pointer;
        }

        .map-mode-toggle button.active {
            background-color: var(--primary-blue);
            color: #ffffff;
        }

        .map-wrapper-full {
            flex: 1;
            border-radius: 10px;
            overflow: hidden;
        }

        .map-wrapper-full #kg-map {
            width: 100%;
            height: 560px;
        }

        .map-panel-footer {
            font-size: 0.78rem;
            color: #6b7280;
        }

        .results-panel {
            background-color: #ffffff;
            border-radius: 14px;
            padding: 14px 13px 16px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 10px 26px rgba(15, 23, 42, 0.08);
        }

        .results-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            margin-bottom: 0.6rem;
        }

        .results-panel-header h2 {
            font-size: 1rem;
            margin: 0;
        }

        .results-meta {
            font-size: 0.78rem;
            color: #6b7280;
        }

        .results-sort {
            font-size: 0.78rem;
        }

        .results-sort select {
            font-size: 0.8rem;
            padding: 4px 6px;
        }

        .location-list-extended {
            max-height: 560px;
            overflow-y: auto;
        }

        .results-panel-footer {
            margin-top: 0.7rem;
            font-size: 0.78rem;
            color: #6b7280;
        }

        /* responsief */
        @media (max-width: 992px) {
            .sub-hero-inner {
                grid-template-columns: minmax(0, 1fr);
            }

            .search-layout-inner {
                grid-template-columns: minmax(0, 1fr);
            }

            .filters-panel {
                order: 1;
            }

            .map-panel {
                order: 2;
            }

            .results-panel {
                order: 3;
            }

            .map-wrapper-full #kg-map {
                height: 420px;
            }
        }

        @media (max-width: 768px) {
            .sub-hero {
                padding-top: calc(var(--header-height) + 16px);
                text-align: left;
            }

            .sub-hero-title {
                font-size: 1.8rem;
            }

            .sub-hero-right {
                justify-content: flex-start;
            }

            .sub-hero-card {
                max-width: 100%;
            }

            .search-layout {
                padding: 26px 0 50px;
            }

            .search-layout-inner {
                display: block;
            }

            .filters-panel,
            .map-panel,
            .results-panel {
                margin-bottom: 16px;
            }

            .filters-toggle-mobile {
                display: inline-flex;
            }

            .map-wrapper-full #kg-map {
                height: 360px;
            }

            .results-panel-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }
        }
    </style>
</head>
<body>

<header>
    <div class="container header-content">
        <a href="index.html" class="logo">
            <img src="img/partner/keylessgo-logo.jpg" alt="KeylessGo logo">
        </a>

        <nav class="nav-menu">
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="zoek-en-boek.html" class="active">Zoek &amp; Boek</a></li>

                <li class="has-submenu">
                    <a href="voertuigen.html">Voertuigen</a>
                    <ul class="submenu">
                        <li><a href="busje-huren.html">Busje huren</a></li>
                        <li><a href="auto-huren.html">Auto huren</a></li>
                        <li><a href="elektrisch-rijden.html">Elektrisch rijden</a></li>
                        <li><a href="onze-vloot.html">Onze vloot</a></li>
                    </ul>
                </li>

                <li><a href="tarieven.html">Tarieven</a></li>
                <li><a href="index.html#hoe-werkt-huren">Hoe het werkt</a></li>
                <li><a href="index.html#waarom-keylessgo">Waarom KeylessGo</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <a href="https://www.snappcar.nl" target="_blank" rel="noopener" class="btn btn-primary nav-cta">
                Direct huren via SnappCar.nl
            </a>
        </nav>

        <button class="hamburger" id="hamburger" aria-label="Menu openen" aria-expanded="false">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
    </div>
</header>

<main>
    <!-- SUB HERO -->
    <section class="sub-hero">
        <div class="container sub-hero-inner">
            <div class="sub-hero-left">
                <div class="sub-hero-eyebrow">LIVE KAART &amp; ZOEKTOOL</div>
                <h1 class="sub-hero-title">Zoek &amp; boek een voertuig in jouw buurt</h1>
                <p class="sub-hero-text">
                    Hier zie je de volledige live kaart met alle KeylessGo voertuigen in de regio Utrecht. 
                    Filter op voertuigtype, laadruimte, gebruiksdoel en afstand. Klik op een voertuig in de kaart 
                    of in de lijst om direct via SnappCar te boeken.
                </p>

                <div class="sub-hero-quick-actions">
                    <button type="button" class="chip-button" id="chip-utrecht">
                        <i class="fa-solid fa-location-dot"></i> Utrecht &amp; omgeving
                    </button>
                    <button type="button" class="chip-button" id="chip-houten">
                        <i class="fa-solid fa-location-dot"></i> Houten &amp; omgeving
                    </button>
                    <button type="button" class="chip-button" id="chip-ev">
                        <i class="fa-solid fa-bolt"></i> Alleen elektrische voertuigen
                    </button>
                </div>

                <div class="sub-hero-meta">
                    <span><i class="fa-solid fa-circle-check"></i> Keyless toegang</span>
                    <span><i class="fa-solid fa-shield-halved"></i> All-risk verzekerd via SnappCar</span>
                    <span><i class="fa-solid fa-clock"></i> Binnen enkele minuten op weg</span>
                </div>
            </div>

            <div class="sub-hero-right">
                <div class="sub-hero-card">
                    <div class="sub-hero-card-header">
                        <span class="card-label">Snelle start</span>
                        <span class="card-pill">Stap 1 t/m 3</span>
                    </div>
                    <ol class="sub-hero-steps">
                        <li><strong>Kies je locatie</strong> ‚Äì zoek op plaats, wijk of postcode.</li>
                        <li><strong>Selecteer het juiste voertuig</strong> ‚Äì busje, auto of EV.</li>
                        <li><strong>Boek via SnappCar</strong> ‚Äì volledig keyless en verzekerd.</li>
                    </ol>
                    <button type="button" class="btn btn-primary" id="sub-hero-scroll-to-search">
                        Start met zoeken
                    </button>
                    <p class="sub-hero-card-note">
                        Je boekt altijd veilig via SnappCar. KeylessGo beheert de voertuigen en hotspots.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- LAYOUT FILTERS / KAART / RESULTATEN -->
    <section class="search-layout">
        <div class="container">
            <div class="search-layout-inner">
                <!-- FILTERS PANEL -->
                <aside class="filters-panel">
                    <div class="filters-header">
                        <h2>Filters verfijnen</h2>
                        <button id="reset-filters" class="btn btn-secondary btn-sm" type="button">
                            Reset
                        </button>
                    </div>

                    <button type="button" class="filters-toggle-mobile" aria-expanded="true">
                        <span><i class="fa-solid fa-sliders"></i> Filters verbergen</span>
                        <i class="fa-solid fa-chevron-up"></i>
                    </button>

                    <div class="filters-body">
                        <!-- Zoek locatie + afstand direct daaronder -->
                        <div class="filter-group">
                            <label for="location-search">Zoek locatie</label>
                            <input id="location-search" type="text" placeholder="Bijv. Utrecht, Houten, Amersfoort">
                            <p class="filter-description">
                                Tip: je kunt zoeken op plaats, wijk of postcode (PC4).
                            </p>
                        </div>

                        <div class="filter-group">
                            <label for="distance-filter">Afstand tot gekozen locatie</label>
                            <select id="distance-filter">
                                <option value="any">Geen limiet</option>
                                <option value="2">Binnen 2 km</option>
                                <option value="5">Binnen 5 km</option>
                                <option value="10">Binnen 10 km</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label for="location-type-filter">Voertuigtype</label>
                            <select id="location-type-filter">
                                <option value="all">Alle voertuigtypen</option>
                                <option value="auto">Auto</option>
                                <option value="bus-small">Busje Small</option>
                                <option value="bus-medium">Busje Medium</option>
                                <option value="bus-large">Busje Large</option>
                                <option value="ev">Elektrisch</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label for="usage-filter">Gebruik</label>
                            <div class="filter-row">
                                <select id="usage-filter">
                                    <option value="all">Alles</option>
                                    <option value="verhuizen">Verhuizen</option>
                                    <option value="klussen">Klussen &amp; bezorgen</option>
                                    <option value="weekend">Weekend weg</option>
                                    <option value="zakelijk">Zakelijk gebruik</option>
                                </select>
                            </div>
                            <p class="filter-description">
                                Optioneel: te koppelen aan scenario‚Äôs in je tools.
                            </p>
                        </div>

                        <!-- Extra voorkeuren iets hoger in de flow -->
                        <div class="filter-group">
                            <label>Extra voorkeuren</label>
                            <div class="inline-checkbox">
                                <input type="checkbox" id="only-ev">
                                <label for="only-ev">Alleen elektrisch</label>
                            </div>
                            <div class="inline-checkbox">
                                <input type="checkbox" id="only-low-emission">
                                <label for="only-low-emission">Geschikt voor milieuzones</label>
                            </div>
                            <div class="inline-checkbox">
                                <input type="checkbox" id="only-keyless">
                                <label for="only-keyless">Alleen Keyless voertuigen</label>
                            </div>
                        </div>

                        <div class="filter-group">
                            <label for="cargo-filter">Laadruimte (indicatief)</label>
                            <div class="filter-row">
                                <select id="cargo-filter">
                                    <option value="all">Alle groottes</option>
                                    <option value="compact">Compact (auto / Caddy)</option>
                                    <option value="medium">Medium (Transporter)</option>
                                    <option value="large">Large (Crafter)</option>
                                </select>
                            </div>
                        </div>

                        <div class="filter-group">
                            <label>Budget (dagprijs)</label>
                            <div class="filter-row">
                                <input type="number" id="price-min" placeholder="Min ‚Ç¨">
                                <input type="number" id="price-max" placeholder="Max ‚Ç¨">
                            </div>
                        </div>

                        <div class="filter-group">
                            <label>Periode</label>
                            <div class="filter-row">
                                <input type="date" id="date-from" placeholder="dd-mm-jjjj">
                                <input type="date" id="date-to" placeholder="dd-mm-jjjj">
                            </div>
                            <p class="filter-description">
                                Later te koppelen aan beschikbaarheid uit SnappCar of je eigen planningsmodel.
                            </p>
                        </div>

                        <div class="filters-actions">
                            <button id="location-search-btn" class="btn btn-secondary" type="button">
                                <i class="fa-solid fa-magnifying-glass-location"></i> Zoek &amp; zoom
                            </button>
                            <button id="use-my-location" class="btn btn-secondary" type="button">
                                <i class="fa-solid fa-location-crosshairs"></i> Mijn locatie
                            </button>
                        </div>
                    </div>
                </aside>

                <!-- KAART PANEL -->
                <section class="map-panel">
                    <div class="map-panel-header">
                        <h2>Live kaart met voertuigen</h2>
                        <div class="map-mode-toggle">
                            <button type="button" class="active" id="map-mode-vehicles">Voertuigen</button>
                            <button type="button" id="map-mode-hotspots">Hotspots</button>
                        </div>
                    </div>

                    <div class="map-wrapper-full">
                        <div id="kg-map"></div>
                    </div>

                    <div class="map-panel-footer">
                        Klik op een marker om details te zien, route te openen in Google Maps of direct te boeken via SnappCar.
                    </div>
                </section>

                <!-- RESULTATEN PANEL -->
                <aside class="results-panel">
                    <div class="results-panel-header">
                        <div>
                            <h2>Dichtstbijzijnde voertuigen</h2>
                            <div class="results-meta">
                                <span id="results-count">Voertuigen in de buurt van jouw zoeklocatie.</span>
                            </div>
                        </div>
                        <div class="results-sort">
                            <label for="sort-results">Sorteer op:</label>
                            <select id="sort-results">
                                <option value="distance">Afstand</option>
                                <option value="price-asc">Prijs (laag-hoog)</option>
                                <option value="price-desc">Prijs (hoog-laag)</option>
                                <option value="size">Grootte voertuig</option>
                            </select>
                        </div>
                    </div>

                    <div class="location-list location-list-extended" data-location-list></div>

                    <div class="results-panel-footer">
                        Alle reserveringen, betalingen en verzekering lopen via SnappCar. 
                        KeylessGo zorgt voor goed onderhouden voertuigen, slimme hotspots en support.
                    </div>
                </aside>
            </div>
        </div>
    </section>

    <!-- FAQ BLOK -->
    <section class="usp-blocks">
        <div class="container">
            <h2>Veelgestelde vragen over zoeken &amp; boeken</h2>
            <p class="section-sub">
                Korte antwoorden op veelgestelde vragen. Zo weet je precies waar je aan toe bent voordat je boekt.
            </p>

            <div class="usp-grid">
                <article class="usp-item">
                    <div class="usp-icon">üìç</div>
                    <h3>Hoe kies ik de beste locatie?</h3>
                    <p>
                        Zoek eerst op je woonplaats of wijk. Kies daarna een voertuig binnen 1‚Äì5 km zodat je er makkelijk naartoe kunt lopen of fietsen.
                    </p>
                </article>

                <article class="usp-item">
                    <div class="usp-icon">‚è±Ô∏è</div>
                    <h3>Kan ik last-minute boeken?</h3>
                    <p>
                        Ja, veel voertuigen zijn keyless en direct boekbaar. Vaak kun je binnen enkele minuten na je boeking al vertrekken.
                    </p>
                </article>

                <article class="usp-item">
                    <div class="usp-icon">üßæ</div>
                    <h3>Hoe werkt de prijsopbouw?</h3>
                    <p>
                        De basisprijs is per dag inclusief een aantal vrije kilometers. Extra kilometers, brandstof en eventuele extra‚Äôs worden achteraf via SnappCar afgerekend.
                    </p>
                </article>
            </div>
        </div>
    </section>
</main>

<!-- FOOTER -->
<footer>
    <div class="container footer-grid">
        <div>
            <div class="footer-logo">KeylessGo</div>
            <p class="footer-text">
                Moderne deelauto's en busjes met keyless toegang. 
                Vlootbeheer door KeylessGo, boekingen via SnappCar.
            </p>
        </div>
        <div class="footer-col">
            <h4>Menu</h4>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="zoek-en-boek.html">Zoek &amp; Boek</a></li>
                <li><a href="index.html#onze-vloot">Onze vloot</a></li>
                <li><a href="index.html#hoe-werkt-huren">Hoe het werkt</a></li>
                <li><a href="index.html#waarom-keylessgo">Waarom KeylessGo</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Contact</h4>
            <ul>
                <li><a href="contact.html">Contactformulier</a></li>
                <li><a href="mailto:info@keylessgo.nl">info@keylessgo.nl</a></li>
                <li><a href="#">Privacy &amp; cookies</a></li>
            </ul>
        </div>
    </div>
    <div class="copyright">
        ¬© <span id="year"></span> KeylessGo. Boekingen, verificatie en verzekering verlopen via SnappCar.
    </div>
</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Eigen JS -->
<script src="data/map.js"></script>
<script src="data/fleet.js"></script>
<script src="data/find-vehicle.js"></script>

<script>
    // jaar in footer
    document.getElementById("year").textContent = new Date().getFullYear();

    // hamburger menu
    const hamburger = document.getElementById("hamburger");
    const navMenu = document.querySelector(".nav-menu");

    if (hamburger && navMenu) {
        hamburger.addEventListener("click", () => {
            const isActive = navMenu.classList.toggle("active");
            hamburger.setAttribute("aria-expanded", isActive ? "true" : "false");
        });
    }

    // mobile submenu toggle
    const submenuParents = document.querySelectorAll(".has-submenu");
    submenuParents.forEach(parent => {
        parent.addEventListener("click", (e) => {
            if (window.innerWidth > 768) return;
            e.stopPropagation();
            parent.classList.toggle("open");
        });
    });

    // Quick action chips
    const searchInput = document.getElementById("location-search");
    const typeFilter = document.getElementById("location-type-filter");
    const onlyEvCheckbox = document.getElementById("only-ev");

    const utrechtChip = document.getElementById("chip-utrecht");
    const houtenChip = document.getElementById("chip-houten");
    const evChip = document.getElementById("chip-ev");
    const scrollToSearchBtn = document.getElementById("sub-hero-scroll-to-search");

    function triggerSearchClick() {
        const btn = document.getElementById("location-search-btn");
        if (btn) btn.click();
    }

    if (utrechtChip && searchInput) {
        utrechtChip.addEventListener("click", () => {
            searchInput.value = "Utrecht";
            if (typeFilter) typeFilter.value = "all";
            if (onlyEvCheckbox) onlyEvCheckbox.checked = false;
            triggerSearchClick();
        });
    }

    if (houtenChip && searchInput) {
        houtenChip.addEventListener("click", () => {
            searchInput.value = "Houten";
            if (typeFilter) typeFilter.value = "all";
            if (onlyEvCheckbox) onlyEvCheckbox.checked = false;
            triggerSearchClick();
        });
    }

    if (evChip && searchInput && onlyEvCheckbox) {
        evChip.addEventListener("click", () => {
            searchInput.value = "Utrecht";
            if (typeFilter) typeFilter.value = "ev";
            onlyEvCheckbox.checked = true;
            triggerSearchClick();
        });
    }

    if (scrollToSearchBtn) {
        scrollToSearchBtn.addEventListener("click", () => {
            const section = document.querySelector(".search-layout");
            if (!section) return;
            section.scrollIntoView({ behavior: "smooth", block: "start" });
        });
    }

    // Reset filters
    const resetBtn = document.getElementById("reset-filters");
    if (resetBtn) {
        resetBtn.addEventListener("click", () => {
            const idsToReset = [
                "location-search",
                "usage-filter",
                "cargo-filter",
                "date-from",
                "date-to",
                "price-min",
                "price-max",
                "distance-filter",
                "location-type-filter"
            ];
            idsToReset.forEach(id => {
                const el = document.getElementById(id);
                if (!el) return;
                if (el.tagName === "SELECT") {
                    el.selectedIndex = 0;
                } else {
                    el.value = "";
                }
            });

            ["only-ev","only-low-emission","only-keyless"].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.checked = false;
            });
        });
    }

    // Mobile: filters inklapbaar
    const filtersPanel = document.querySelector(".filters-panel");
    const filtersToggleMobile = document.querySelector(".filters-toggle-mobile");
    if (filtersPanel && filtersToggleMobile) {
        filtersToggleMobile.addEventListener("click", () => {
            const isCollapsed = filtersPanel.classList.toggle("collapsed");
            filtersToggleMobile.setAttribute("aria-expanded", (!isCollapsed).toString());
            const textSpan = filtersToggleMobile.querySelector("span");
            const icon = filtersToggleMobile.querySelector("i.fa-chevron-up, i.fa-chevron-down");
            if (isCollapsed) {
                if (textSpan) textSpan.firstChild.textContent = " Filters tonen";
                if (icon) {
                    icon.classList.remove("fa-chevron-up");
                    icon.classList.add("fa-chevron-down");
                }
            } else {
                if (textSpan) textSpan.firstChild.textContent = " Filters verbergen";
                if (icon) {
                    icon.classList.remove("fa-chevron-down");
                    icon.classList.add("fa-chevron-up");
                }
            }
        });

        // Zorg dat op desktop filters altijd open zijn
        window.addEventListener("resize", () => {
            if (window.innerWidth > 768 && filtersPanel.classList.contains("collapsed")) {
                filtersPanel.classList.remove("collapsed");
                filtersToggleMobile.setAttribute("aria-expanded", "true");
            }
        });
    }

    // ====== UX/SEO upgrade voor resultaatkaarten: type-labels + usage-tekst ======
    function getSeoLabel(raw) {
        const t = (raw || "").toLowerCase();
        switch (t) {
            case "bus-small":
            case "bus_s":
                return "Bus S";
            case "bus-medium":
            case "bus_m":
                return "Bus M";
            case "bus-large":
            case "bus_l":
                return "Bus L";
            case "auto":
            case "compact":
                return "Compact car";
            case "ev":
            case "elektrisch":
            case "electric":
                return "EV";
            default:
                return raw || "";
        }
    }

    function getUsageText(raw) {
        const t = (raw || "").toLowerCase();

        let base;
        if (t.includes("bus-large") || t === "bus_l") {
            base = "Vaak geboekt voor grote verhuizingen en volumetransport.";
        } else if (t.includes("bus-medium") || t === "bus_m") {
            base = "Populair voor verhuisklussen en grotere transporten.";
        } else if (t.includes("bus-small") || t === "bus_s") {
            base = "Ideaal voor kleine verhuizingen, klussen en bezorgen.";
        } else if (t === "ev" || t.includes("electric") || t.includes("elektrisch")) {
            base = "Elektrische deelauto, perfect voor stille ritten en woon-werkverkeer.";
        } else if (t === "auto" || t === "compact") {
            base = "Compacte stadsauto, veel gebruikt voor korte ritten en dagjes weg.";
        } else {
            base = "Veel gebruikt voor dagelijkse ritten en lichte transportklussen.";
        }

        if (t.includes("bus") || t === "auto" || t === "compact") {
            base += " Geschikt voor binnenstad en milieuzones (Euro 6).";
        }
        if (t === "ev" || t.includes("electric") || t.includes("elektrisch")) {
            base += " Altijd toegestaan in milieuzones en emissievrije zones.";
        }

        return base;
    }

    function enhanceLocationCards(root) {
        if (!root) return;
        const cards = root.querySelectorAll(".location-card");
        cards.forEach(card => {
            const badge = card.querySelector(".location-card-type");
            if (!badge || badge.dataset.enhanced === "1") return;

            const rawText = (badge.textContent || "").trim();
            const seoLabel = getSeoLabel(rawText);
            badge.textContent = seoLabel;
            badge.dataset.enhanced = "1";

            let usageEl = card.querySelector(".location-card-usage");
            if (!usageEl) {
                usageEl = document.createElement("div");
                usageEl.className = "location-card-usage";
                card.appendChild(usageEl);
            }
            usageEl.textContent = getUsageText(rawText);
        });
    }

    const listEl = document.querySelector("[data-location-list]");
    if (listEl) {
        enhanceLocationCards(listEl);

        const observer = new MutationObserver(() => {
            enhanceLocationCards(listEl);
        });
        observer.observe(listEl, { childList: true, subtree: true });
    }
</script>

</body>
</html>
