<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8" />
    <title>Zoek &amp; boek een voertuig ‚Äì KeylessGo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Zoek en boek direct een keyless auto of busje van KeylessGo in de regio Utrecht. Filter op voertuigtype, locatie en gebruiksdoel en boek via SnappCar.">

    <!-- Leaflet CSS -->
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Eigen styles -->
    <link rel="stylesheet" href="data/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<header>
    <div class="container header-content">
        <a href="index.html" class="logo">
            <img src="img/partner/keylessgo-logo.jpg" alt="KeylessGo logo">
        </a>

        <nav class="nav-menu">
            <ul class="nav-links">
                <li><a href="zoek-en-boek.html" class="active">Zoek &amp; Boek</a></li>

                <li class="has-submenu">
                    <a href="voertuigen.html">Voertuigen</a>
                    <ul class="submenu">
                        <li><a href="busje-huren.html">Busje huren</a></li>
                        <li><a href="auto-huren.html">Auto huren</a></li>
                        <li><a href="elektrisch-rijden.html">Elektrisch rijden</a></li>
                        <li><a href="onze-vloot.html">Onze volledige vloot</a></li>
                    </ul>
                </li>

                <li><a href="tarieven.html">Tarieven</a></li>
                <li><a href="index.html#hoe-werkt-huren">Hoe het werkt</a></li>
                <li><a href="index.html#waarom-keylessgo">Waarom KeylessGo</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <a href="https://www.snappcar.nl" target="_blank" rel="noopener" class="btn btn-primary nav-cta">
                Direct huren via SnappCar.nl
            </a>
        </nav>

        <button class="hamburger" id="hamburger" aria-label="Menu openen" aria-expanded="false">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
    </div>
</header>

<main>
    <!-- SUB HERO / INTRO (NIEUW) -->
    <section class="sub-hero">
        <div class="container sub-hero-inner">
            <div class="sub-hero-left">
                <div class="sub-hero-eyebrow">LIVE KAART &amp; ZOEKTOOL</div>
                <h1 class="sub-hero-title">Zoek &amp; boek een voertuig in jouw buurt</h1>
                <p class="sub-hero-text">
                    Hier zie je de volledige live kaart met alle KeylessGo voertuigen in de regio Utrecht. 
                    Filter op voertuigtype, laadruimte, gebruiksdoel en afstand. Klik op een voertuig in de kaart 
                    of in de lijst om direct via SnappCar te boeken.
                </p>

                <div class="sub-hero-quick-actions">
                    <button type="button" class="chip-button" id="chip-utrecht">
                        <i class="fa-solid fa-location-dot"></i> Bekijk aanbod in Utrecht
                    </button>
                    <button type="button" class="chip-button" id="chip-houten">
                        <i class="fa-solid fa-location-dot"></i> Houten &amp; omgeving
                    </button>
                    <button type="button" class="chip-button" id="chip-ev">
                        <i class="fa-solid fa-bolt"></i> Alleen elektrische voertuigen
                    </button>
                </div>

                <div class="sub-hero-meta">
                    <span><i class="fa-solid fa-circle-check"></i> Keyless toegang</span>
                    <span><i class="fa-solid fa-shield-halved"></i> All-risk verzekerd via SnappCar</span>
                    <span><i class="fa-solid fa-clock"></i> Binnen enkele minuten op weg</span>
                </div>
            </div>

            <div class="sub-hero-right">
                <div class="sub-hero-card">
                    <div class="sub-hero-card-header">
                        <span class="card-label">Snelle start</span>
                        <span class="card-pill">Stap 1 t/m 3</span>
                    </div>
                    <ol class="sub-hero-steps">
                        <li><strong>Kies je locatie</strong> ‚Äì zoek op plaats, wijk of postcode.</li>
                        <li><strong>Selecteer het juiste voertuig</strong> ‚Äì busje, auto of EV.</li>
                        <li><strong>Boek via SnappCar</strong> ‚Äì volledig keyless en verzekerd.</li>
                    </ol>
                    <div class="sub-hero-card-footer">
                        <button type="button" class="btn btn-primary" id="sub-hero-scroll-to-search">
                            Start met zoeken
                        </button>
                        <p class="sub-hero-card-note">
                            Je boekt altijd veilig via SnappCar. KeylessGo beheert de voertuigen en hotspots.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- HOOFDLAY-OUT: FILTERS ‚Äì KAART ‚Äì RESULTATEN -->
    <section class="search-layout">
        <div class="container">
            <div class="search-layout-inner">
                <!-- FILTERS PANEL -->
                <aside class="filters-panel">
                    <div class="filters-header">
                        <h2>Filters verfijnen</h2>
                        <button id="reset-filters" class="btn-ghost" type="button">
                            <i class="fa-solid fa-rotate-left"></i> Reset
                        </button>
                    </div>

                    <!-- Locatie & voertuigtype (koppelen aan bestaande JS IDs) -->
                    <div class="filter-group">
                        <label for="location-search">Zoek locatie</label>
                        <input id="location-search" class="search-input" type="text" placeholder="Bijv. Utrecht, Houten, Amersfoort">
                        <p class="filter-description">
                            Tip: je kunt zoeken op plaats, wijk of postcode (PC4).
                        </p>
                    </div>

                    <div class="filter-group">
                        <label for="location-type-filter">Voertuigtype</label>
                        <select id="location-type-filter" class="type-select">
                            <option value="all">Alle voertuigtypen</option>
                            <option value="auto">Auto</option>
                            <option value="bus-small">Busje Small</option>
                            <option value="bus-medium">Busje Medium</option>
                            <option value="bus-large">Busje Large</option>
                            <option value="ev">Elektrisch</option>
                        </select>
                    </div>

                    <!-- Extra filters (optioneel later koppelen in JS) -->
                    <div class="filter-group">
                        <label>Gebruik</label>
                        <div class="filter-row">
                            <select id="usage-filter">
                                <option value="all">Alles</option>
                                <option value="verhuizen">Verhuizen</option>
                                <option value="klussen">Klussen &amp; bezorgen</option>
                                <option value="weekend">Weekend weg</option>
                                <option value="zakelijk">Zakelijk gebruik</option>
                            </select>
                        </div>
                        <p class="filter-description">
                            Wordt gebruikt voor rapportage / segmentatie; optioneel te koppelen aan scenario‚Äôs in je tools.
                        </p>
                    </div>

                    <div class="filter-group">
                        <label>Laadruimte (indicatief)</label>
                        <div class="filter-row">
                            <select id="cargo-filter">
                                <option value="all">Alle groottes</option>
                                <option value="compact">Compact (auto / Caddy)</option>
                                <option value="medium">Medium (Transporter)</option>
                                <option value="large">Large (Crafter)</option>
                            </select>
                        </div>
                    </div>

                    <div class="filter-group">
                        <label>Periode</label>
                        <div class="filter-row">
                            <input type="date" id="date-from">
                            <input type="date" id="date-to">
                        </div>
                        <p class="filter-description">
                            Kan gebruikt worden om straks beschikbaarheid te koppelen aan SnappCar-data of je eigen planningsmodel.
                        </p>
                    </div>

                    <div class="filter-group">
                        <label>Budget (dagprijs)</label>
                        <div class="filter-row">
                            <input type="number" id="price-min" placeholder="Min ‚Ç¨">
                            <input type="number" id="price-max" placeholder="Max ‚Ç¨">
                        </div>
                    </div>

                    <div class="filter-group">
                        <label>Extra voorkeuren</label>
                        <div class="inline-checkbox">
                            <input type="checkbox" id="only-ev">
                            <label for="only-ev">Alleen elektrisch</label>
                        </div>
                        <div class="inline-checkbox">
                            <input type="checkbox" id="only-low-emission">
                            <label for="only-low-emission">Geschikt voor milieuzones</label>
                        </div>
                        <div class="inline-checkbox">
                            <input type="checkbox" id="only-keyless">
                            <label for="only-keyless">Alleen Keyless voertuigen</label>
                        </div>
                    </div>

                    <div class="filter-group">
                        <label>Afstand tot gekozen locatie</label>
                        <select id="distance-filter">
                            <option value="any">Geen limiet</option>
                            <option value="2">Binnen 2 km</option>
                            <option value="5">Binnen 5 km</option>
                            <option value="10">Binnen 10 km</option>
                        </select>
                    </div>

                    <div class="filters-actions">
                        <button id="location-search-btn" class="btn btn-secondary" type="button">
                            <i class="fa-solid fa-magnifying-glass-location"></i> Zoek &amp; zoom
                        </button>
                        <button id="use-my-location" class="btn btn-secondary" type="button">
                            <i class="fa-solid fa-location-crosshairs"></i> Mijn locatie
                        </button>
                    </div>
                </aside>

                <!-- KAART PANEL -->
                <section class="map-panel">
                    <div class="map-panel-header">
                        <h2>Live kaart met voertuigen</h2>
                        <div class="map-mode-toggle">
                            <button type="button" class="active" id="map-mode-vehicles">Voertuigen</button>
                            <button type="button" id="map-mode-hotspots">Hotspots</button>
                        </div>
                    </div>

                    <div class="map-wrapper-full">
                        <div id="kg-map"></div>
                    </div>

                    <div class="map-panel-footer">
                        Klik op een marker om details te zien, route te openen in Google Maps of direct te boeken via SnappCar.
                    </div>
                </section>

                <!-- RESULTATEN PANEL -->
                <aside class="results-panel">
                    <div class="results-panel-header">
                        <div>
                            <h2>Dichtstbijzijnde voertuigen</h2>
                            <div class="results-meta">
                                <span id="results-count">Voertuigen in de buurt van jouw zoeklocatie.</span>
                            </div>
                        </div>
                        <div class="results-sort">
                            <label for="sort-results">Sorteer op:</label>
                            <select id="sort-results">
                                <option value="distance">Afstand</option>
                                <option value="price-asc">Prijs (laag-hoog)</option>
                                <option value="price-desc">Prijs (hoog-laag)</option>
                                <option value="size">Grootte voertuig</option>
                            </select>
                        </div>
                    </div>

                    <!-- Wordt door JS gevuld -->
                    <div class="location-list location-list-extended" data-location-list></div>

                    <div class="results-panel-footer">
                        Alle reserveringen, betalingen en verzekering lopen via SnappCar. 
                        KeylessGo zorgt voor goed onderhouden voertuigen, slimme hotspots en support.
                    </div>
                </aside>
            </div>
        </div>
    </section>

    <!-- Extra info / FAQ -->
    <section class="usp-blocks">
        <div class="container">
            <h2>Veelgestelde vragen over voertuigen zoeken &amp; boeken</h2>
            <p class="section-sub">
                Een paar korte antwoorden op veelgestelde vragen. Zo weet je precies waar je aan toe bent voordat je boekt.
            </p>

            <div class="usp-grid">
                <article class="usp-item">
                    <div class="usp-icon">üìç</div>
                    <h3>Hoe kies ik de beste locatie?</h3>
                    <p>
                        Zoek eerst op je woonplaats of wijk. Kies daarna een voertuig binnen 1‚Äì5 km zodat je er makkelijk naartoe kunt lopen of fietsen.
                    </p>
                </article>

                <article class="usp-item">
                    <div class="usp-icon">‚è±Ô∏è</div>
                    <h3>Kan ik last-minute boeken?</h3>
                    <p>
                        Ja, veel voertuigen zijn keyless en direct boekbaar. Vaak kun je binnen enkele minuten na je boeking al vertrekken.
                    </p>
                </article>

                <article class="usp-item">
                    <div class="usp-icon">üßæ</div>
                    <h3>Hoe werkt de prijsopbouw?</h3>
                    <p>
                        De basisprijs is per dag inclusief een aantal vrije kilometers. Extra kilometers, brandstof en eventuele extra‚Äôs worden achteraf via SnappCar afgerekend.
                    </p>
                </article>
            </div>
        </div>
    </section>
</main>

<!-- FOOTER -->
<footer>
    <div class="container footer-grid">
        <div>
            <div class="footer-logo">KeylessGo</div>
            <p class="footer-text">
                Moderne deelauto's en busjes met keyless toegang. 
                Vlootbeheer door KeylessGo, boekingen via SnappCar.
            </p>
        </div>
        <div class="footer-col">
            <h4>Menu</h4>
            <ul>
                <li><a href="zoek-en-boek.html">Zoek &amp; Boek</a></li>
                <li><a href="index.html#onze-vloot">Onze vloot</a></li>
                <li><a href="index.html#hoe-werkt-huren">Hoe het werkt</a></li>
                <li><a href="index.html#waarom-keylessgo">Waarom KeylessGo</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Contact</h4>
            <ul>
                <li><a href="contact.html">Contactformulier</a></li>
                <li><a href="mailto:info@keylessgo.nl">info@keylessgo.nl</a></li>
                <li><a href="#">Privacy &amp; cookies</a></li>
            </ul>
        </div>
    </div>
    <div class="copyright">
        ¬© <span id="year"></span> KeylessGo. Boekingen, verificatie en verzekering verlopen via SnappCar.
    </div>
</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Eigen JS (zelfde als op index) -->
<script src="data/map.js"></script>
<script src="data/fleet.js"></script>
<script src="data/find-vehicle.js"></script>

<script>
    // jaar in footer
    document.getElementById("year").textContent = new Date().getFullYear();

    // hamburger menu
    const hamburger = document.getElementById("hamburger");
    const navMenu = document.querySelector(".nav-menu");

    if (hamburger && navMenu) {
        hamburger.addEventListener("click", () => {
            const isActive = navMenu.classList.toggle("active");
            hamburger.setAttribute("aria-expanded", isActive ? "true" : "false");
        });
    }

    // mobile submenu toggle
    const submenuParents = document.querySelectorAll(".has-submenu");
    submenuParents.forEach(parent => {
        parent.addEventListener("click", (e) => {
            if (window.innerWidth > 768) return;
            e.stopPropagation();
            parent.classList.toggle("open");
        });
    });

    // Quick action chips in sub-hero
    const searchInput = document.getElementById("location-search");
    const typeFilter = document.getElementById("location-type-filter");
    const onlyEvCheckbox = document.getElementById("only-ev");

    const utrechtChip = document.getElementById("chip-utrecht");
    const houtenChip = document.getElementById("chip-houten");
    const evChip = document.getElementById("chip-ev");
    const scrollToSearchBtn = document.getElementById("sub-hero-scroll-to-search");

    function triggerSearchClick() {
        const btn = document.getElementById("location-search-btn");
        if (btn) btn.click();
    }

    if (utrechtChip && searchInput) {
        utrechtChip.addEventListener("click", () => {
            searchInput.value = "Utrecht";
            if (typeFilter) typeFilter.value = "all";
            if (onlyEvCheckbox) onlyEvCheckbox.checked = false;
            triggerSearchClick();
        });
    }

    if (houtenChip && searchInput) {
        houtenChip.addEventListener("click", () => {
            searchInput.value = "Houten";
            if (typeFilter) typeFilter.value = "all";
            if (onlyEvCheckbox) onlyEvCheckbox.checked = false;
            triggerSearchClick();
        });
    }

    if (evChip && searchInput && onlyEvCheckbox) {
        evChip.addEventListener("click", () => {
            searchInput.value = "Utrecht";
            if (typeFilter) typeFilter.value = "ev";
            onlyEvCheckbox.checked = true;
            triggerSearchClick();
        });
    }

    if (scrollToSearchBtn) {
        scrollToSearchBtn.addEventListener("click", () => {
            const section = document.querySelector(".search-layout");
            if (!section) return;
            section.scrollIntoView({ behavior: "smooth", block: "start" });
        });
    }

    // Reset filters
    const resetBtn = document.getElementById("reset-filters");
    if (resetBtn) {
        resetBtn.addEventListener("click", () => {
            const idsToReset = [
                "location-search",
                "usage-filter",
                "cargo-filter",
                "date-from",
                "date-to",
                "price-min",
                "price-max",
                "distance-filter",
                "location-type-filter"
            ];
            idsToReset.forEach(id => {
                const el = document.getElementById(id);
                if (!el) return;
                if (el.tagName === "SELECT") {
                    el.selectedIndex = 0;
                } else {
                    el.value = "";
                }
            });

            ["only-ev","only-low-emission","only-keyless"].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.checked = false;
            });
        });
    }
</script>

</body>
</html>
